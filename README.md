# miniRT
miniRT 과제는 레이트레이싱을 구현 해보는 과제다. 레이트레이싱에 사용되는 개념은 카메라, 광선, 퐁라이트, 도형 등이 사용 된다. 카메라는 도형을 바라보는 시점을 설정한다. 광선은 화면의 크기만큼 한 픽셀식 도형이 현재 픽셀의 범위에 존재하는지 검증하는 판별용이다. 퐁라이트는 도형에 빛을 반사시켜 입체감을 더하는 용도로 사용된다. 기본으로 구현해야할 도형은 구체, 원기둥, 평면이다.
## 3차원 좌표 설정
일반적으로 오른손 좌표계를 사용하며, x는 오른쪽, y는 윗쪽, z는 화면의 튀어나온 쪽 방향을 가르킨다.
<img width="800" height="632" alt="pos" src="https://github.com/user-attachments/assets/8b456d40-c149-48f2-9f4d-6c3ca4d76b6e" />

## 카메라
카메라는 (0, 0, 0)에 설정한다. 카메라의 위치를 기준으로 뷰포트, 도형등의 위치도 설정 된다. 이 덕분에 카메라의 좌표값이 바뀌면 종속된 뷰포트, 도형의 위치도 함께 바뀌어 바라 보는 방향에서 실제 공간을 움직이는 듯한 효과를 얻을 수 있다. 즉 이 카메라를 통해 렌더링된 가상 세상을 바라볼 수 있다.
## 뷰포트
3D 장면을 2D 화면에 투영하기 위한 가상의 화면입니다. 픽셀 단위로 나누어져 있으며 광선이 통과하는 통로다. 뷰포트 뒤에 있는 도형에 광선이 닿는다면 닿은 도형 또는 빈 값에 대한 색을 뷰포트에 색칠을 한다. 뷰포트는 실제 카메라로 치자면 디지털 센서 같은 역할을 한다.
## 광선
카메라에서 뷰포트로 나아가 물체에 닿은 색상을 판별해 도형에 닿았는지 여부를 판단해주는 역할을 한다. 현실에선 빛으로 부터 우리 눈에 가시광선이 들어와 물체를 인식한다. 하지만 가상의 세상에선 광선을 직접 발사해 물체에 닿게하고 닿은 색상을 계산해 정보를 바탕으로 뷰포트에 색칠한다. P(t) = Origin + t*Direction의 방정식을 도형의 방정식에 대입 해 나온 t값을 근의공식에 넣어 근의 여부를 구할 수 있다.
## 도형
광선 방정식과 도형 방정식의 연립 해 교차점을 구합니다. 판별식으로 충돌 여부를 확인하고, 근의 공식으로 교차 거리를 계산합니다
## 퐁라이트
퐁라이트는 빛을 3개의 개념 앰비언트, 디퓨즈, 스페큘러로 쪼개어 모델링한 것이다.

Ambient(주변 조명)
- 밝은 낮 어두운 그늘에 들어가도 물체가 보임
- 공기중 산란되어 존재하는 빛으로 물체가 밝아지는 것을 묘사

Diffuse(확산 조명)
- 거친 표면에서 빛이 사방으로 반사
- 입체감을 느끼는 주요 요소

Specular(반사광)
- 반질반질한 플라스틱이나 금속의 하이라이트
- 거울 처럼 반사되는 정반사
<img width="800" height="216" alt="phong" src="https://github.com/user-attachments/assets/7820da89-f6a0-4c00-b4f6-21b7b3887c9b" />


## 그림자
소프트 쉐도우, 하드 쉐도우 방식이 있는데 hard shadow방식을 사용한다. 소프트 쉐도우는 좀 더 부드러운 그림자를 만들어 현실감이 있다. hard shadow는 그림자가 끝이 딱 떨어지도록 구현되는 좀 더 쉬운 방식이다.

카메라 광선이 물체에 충돌한 방향에서 쉐도우 광선은 조명 방향으로 튕겨간다. 조명방향으로 가는 중 물체가 있다면 해당 광선이 충돌한 지점은 dffuse, specular를 제외한 색을 채운다. 장애물 없이 쉐도우 광선이 조명에 닿았다면 빛을 온전히 받았다 가정하고 ambient + diffuse + specular를 더한 값을 칠한다.

## 참조
- https://raytracing.github.io/books/RayTracingInOneWeekend.html
- https://github.com/GaepoMorningEagles/mini_raytracing_in_c/blob/main/01.rgb_ppm.md
